{{ template "base" . }}
{{ define "content" }}

<section class="mx-8 my-14">
  <section hx-get="/v1/transactions/{{ .ID }}" hx-trigger="load">
    <div class="text-center">
      <span class="loading loading-spinner loading-lg"></span>
    </div>
  </section>
</section>

<!-- Reject transaction modal -->
{{ template "transaction_rejection.html" . }}

{{ end }}

{{ define "appcode" }}
<script>
  const requestRetry = document.getElementById('request_retry')
  const transactionID = "{{ .ID }}"
  document.body.addEventListener('htmx:configRequest', (e) => {
    if (e.detail.path === `/v1/transactions/${transactionID}/reject` && e.detail.verb === 'post') {
      const retryTransaction = requestRetry?.checked;
      e.detail.parameters = {
        ...e.detail.parameters,
        request_retry: retryTransaction,
      };
    };
  });
</script>
{{ end }}