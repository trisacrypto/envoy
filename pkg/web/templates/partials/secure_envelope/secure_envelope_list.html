<section>
  <h2 class="text-xl font-bold">Secure Envelopes</h2>
  {{ if .SecureEnvelopes }}
  {{ range .SecureEnvelopes }}
  <div class="join join-vertical w-full">
    <div class="collapse collapse-plus join-item border border-base-300">
      <input type="radio" name="my-accordion-4" checked="checked" />
      <div class="collapse-title text-xl font-medium">
        <div class="flex items-center gap-x-1">
          {{ if eq .Direction "in" }}
          <div class="tooltip tooltip-right" data-tip="Incoming secure envelope">
            <button>
              <i class="fa-solid fa-file-import" title="Incoming secure envelope"></i>
            </button>
          </div>
          {{ else }}
          <div class="tooltip tooltip-right" data-tip="Outgoing secure envelope">
            <button>
              <i class="fa-solid fa-file-export" title="Outgoing envelope"></i>
            </button>
          </div>
          {{ end }}
          <h3 class="text-lg"><span class="font-semibold">Envelope ID:</span>{{ .EnvelopeID }}</h3>
          {{ $timeStamp := .TimeStamp.Format "January 2, 2006 15:04:05" }}
          <span>{{ $timeStamp }}</span>
        </div>
      </div>
      <div class="collapse-content">
        <div hx-get="/v1/transactions/{{ .ID }}/secure-envelopes/{{ .EnvelopeID }}" hx-trigger="load">
          {{ if .SecureEnvelope.Payload }}
          {{ range .SecureEnvelope.Payload }}
          <div>{{ . }}</div>
          {{ end }}
          {{ end }}

          {{ if .SecureEnvelope.Error }}
          <p>{{ .SecureEnvelope.Error }}</p>
          {{ end }}      
        </div>
      </div>
    </div>
  </div>
  {{ end }}
  {{ else }}
  <p class="my-8 text-center">There are no secure envelopes for this transaction.</p>
</section>
{{ end }}